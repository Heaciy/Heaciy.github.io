<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>django on Heaciy&#39;s Blog</title>
    <link>https://heaciy.com/tags/django/</link>
    <description>Recent content in django on Heaciy&#39;s Blog</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <lastBuildDate>Thu, 10 Jun 2021 00:00:00 +0000</lastBuildDate><atom:link href="https://heaciy.com/tags/django/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Django Signalç®€æ</title>
      <link>https://heaciy.com/p/django-signal-principle-analysis/</link>
      <pubDate>Thu, 10 Jun 2021 00:00:00 +0000</pubDate>
      
      <guid>https://heaciy.com/p/django-signal-principle-analysis/</guid>
      <description>æˆ‘æ‰¿è®¤ï¼Œæ˜¯æ ‡é¢˜å…šï¼å“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆï¼Œæœ¬æ¥æ˜¯å‡†å¤‡å†™ä¸€ç¯‡â€œDjango Signalæºç è§£æâ€”â€”ä»Observer Patternåˆ°Django Signalâ€çš„ï¼Œä½†æ˜¯æˆ‘åˆä¸èƒ½ä¸€ä¸¤å¥è¯æŠŠè§‚å¯Ÿè€…æ¨¡å¼è®²æ¸…æ¥šçš„ï¼Œå¹²è„†å°±ç›´æ¥è´´äº†ä¸€äº›ç›¸å…³çš„é“¾æ¥â€¦â€¦åé¢è¶Šå†™è¶Šå¤šã€è¶Šæ‹–è¶Šé•¿å°±å¹²è„†æ”¹æˆç®€æç®—äº†â€¦â€¦ æœ¬æ–‡åªä½œä¸ºä¸ªäººå­¦ä¹ è®°å½•ï¼Œä»…ä¾›å‚è€ƒï¼Œå¦‚æœ‰è¯¯æ¬¢è¿è®¨è®ºæŒ‡æ­£ é¢˜å›¾æ¥è‡ª unsplashï¼ŒåŸå›¾é“¾æ¥ğŸ”—
 è§‚å¯Ÿè€…æ¨¡å¼ â€œè§‚å¯Ÿè€…æ¨¡å¼æ˜¯ä¸€ç§å¯¹è±¡è¡Œä¸ºæ¨¡å¼ã€‚å®ƒå®šä¹‰å¯¹è±¡é—´çš„ä¸€ç§ä¸€å¯¹å¤šçš„ä¾èµ–å…³ç³»ï¼Œå½“ä¸€ä¸ªå¯¹è±¡çš„çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ï¼Œæ‰€æœ‰ä¾èµ–äºå®ƒçš„å¯¹è±¡éƒ½å¾—åˆ°é€šçŸ¥å¹¶è¢«è‡ªåŠ¨æ›´æ–°ã€‚[1]â€
â€œè§‚å¯Ÿè€…æ¨¡å¼æ˜¯ä¸€ç§è¡Œä¸ºè®¾è®¡æ¨¡å¼ï¼Œ å…è®¸ä½ å®šä¹‰ä¸€ç§è®¢é˜…æœºåˆ¶ï¼Œ å¯åœ¨å¯¹è±¡äº‹ä»¶å‘ç”Ÿæ—¶é€šçŸ¥å¤šä¸ª â€œè§‚å¯Ÿâ€ è¯¥å¯¹è±¡çš„å…¶ä»–å¯¹è±¡ã€‚[2]â€
è§‚å¯Ÿè€…æ¨¡å¼æœ‰å¤šç§å®ç°æ–¹å¼ï¼Œæ¯”è¾ƒç»å…¸çš„ä¸€ç§å®ç°ï¼Œæœ‰å››ä¸ªè§’è‰²ï¼šSubjectï¼ˆè¢«è§‚å¯Ÿå¯¹è±¡æŠ½è±¡ç±»ï¼‰ã€Observerï¼ˆè§‚å¯Ÿè€…æŠ½è±¡ç±»ï¼‰ã€ConcreateObserverï¼ˆå…·ä½“è§‚å¯Ÿè€…ï¼‰ã€ConcreateSubject(å…·ä½“çš„è¢«è§‚å¯Ÿè€…)â€¦â€¦
è¿™é‡Œå°±ä¸èµ˜è¿°äº†â€¦â€¦å¯ä»¥å‚è§ä¸‹é¢çš„é“¾æ¥
 wikipediaï¼šObserver pattern ç™¾åº¦ç™¾ç§‘ï¼šè§‚å¯Ÿè€…æ¨¡å¼ è§‚å¯Ÿè€…æ¨¡å¼ï¼ˆObserveræ¨¡å¼ï¼‰è¯¦è§£ è§‚å¯Ÿè€…æ¨¡å¼ èœé¸Ÿæ•™ç¨‹ï¼šè§‚å¯Ÿè€…æ¨¡å¼ è§‚å¯Ÿè€…æ¨¡å¼çš„pythonç®€å•å®ç°  Signalç®€è¿° å¯ä»¥å…ˆçœ‹çœ‹Djangoçš„å®˜æ–¹æ–‡æ¡£
 https://docs.djangoproject.com/zh-hans/3.0/topics/signals/ https://docs.djangoproject.com/zh-hans/3.0/ref/signals/  ä¸è§‚å¯Ÿè€…æ¨¡å¼å¯¹åº”ï¼šsenderå°±æ˜¯è¢«è§‚å¯Ÿè€…ã€receiveræ˜¯è§‚å¯Ÿè€…ã€‚æœ‰æ‰€ä¸åŒçš„å°±æ˜¯å¤šäº†ä¸ªsignalï¼Œä¹Ÿå°±æ˜¯â€œä¿¡å·â€ï¼ˆä¹Ÿå¯ä½¿è¯´æ˜¯ä¿¡å·çš„â€œç®¡ç†è€…â€ï¼‰ã€‚åœ¨æ™®é€šè§‚å¯Ÿè€…æ¨¡å¼ä¸­ï¼Œè¢«è§‚å¯Ÿå¯¹è±¡æŠ½è±¡ç±»ä¸­ä¸€èˆ¬ä¼šç»´æŠ¤ä¸€ä¸ªè§‚å¯Ÿè€…æŠ½è±¡ç±»çš„å¼•ç”¨åˆ—è¡¨ï¼Œä»¥æ­¤æ¥ä¼ é€’æ¶ˆæ¯ï¼Œè€Œdjangoä¸­åˆ™æ˜¯å€ŸåŠ©Signalç±»è¿›ä¸€æ­¥è§£è€¦ï¼Œé€šè¿‡Signalç±»è¿›è¡Œâ€œä¿¡å·ä¼ é€’â€ï¼Œå…·ä½“è§£æå¦‚ä¸‹ï¼š
1. signal ä¿¡å·ç±»ï¼Œç»´æŠ¤ä¸€ä¸ªreceiversåˆ—è¡¨ï¼Œç”¨äºå­˜å‚¨senderå’Œreceiverçš„å¯¹åº”è®°å½•
signal.connect()ç”¨äºå¾€signal.receiversä¸­æ·»åŠ å¯¹åº”çš„receiverå’Œsenderè®°å½•
signal_send()ï¼Œåœ¨signal.receiversä¸­æŸ¥æ‰¾senderå¯¹åº”çš„receiverså¹¶å°†å¯¹åº”ä¿¡å·(å‚æ•°)ä¼ é€’ç»™å¯¹åº”çš„receivers
djangoé¢„ç½®äº†ä¸€äº›ä¿¡å·å¯¹è±¡ï¼Œpre_initã€post_initã€pre_saveã€post_saveç­‰ï¼Œè¿™äº›éƒ½æ˜¯ç›´æ¥æˆ–é—´æ¥çš„ç»§æ‰¿è‡ªSiganlç±»ï¼Œå•ä¸€èŒè´£åŸåˆ™ï¼Œæ¯ä¸ªå…·ä½“çš„ä¿¡å·å¯¹è±¡åªè´Ÿè´£å­˜å‚¨â€œä¸€ç±»ä¿¡å·â€ï¼Œæ¯”å¦‚å‰é¢åˆ—ä¸¾çš„å››ä¸ªä¿¡å·å¯¹è±¡éƒ½æ˜¯django modelç›¸å…³çš„ã€‚ä»¥pre_saveä¸ºä¾‹ï¼Œåªæœ‰åœ¨è°ƒç”¨æŸä¸ªmodelå¯¹è±¡çš„saveæ–¹æ³•æ—¶ï¼ˆå‰ï¼‰æ‰ä¼šè°ƒç”¨pre_save.send()å‘é€ç›¸å…³æ•°æ®ï¼ˆâ€œä¿¡å·â€ï¼‰ã€‚ä¹Ÿå°±æ˜¯è¯´pre_saveè¿™ä¸ªSignalå¯¹è±¡çš„receiversåˆ—è¡¨ä¸­å­˜å‚¨çš„senderéƒ½æ˜¯modelè€Œreceiveréƒ½æ˜¯æˆ‘ä»¬å¸Œæœ›åœ¨è¿›è¡Œmodel.save()å‰è°ƒç”¨çš„å‡½æ•°æ¥è¿›è¡Œçš„ä¸€äº›ç›¸å…³æ“ä½œã€‚
2. sender ä¿¡å·çš„å‘é€æ–¹ï¼Œå³è°ƒç”¨signal.send()æ–¹æ³•çš„ç±»ã€‚æ¯”å¦‚ï¼Œæ‰€æœ‰modelç±»çš„çˆ¶ç±»éƒ½æ˜¯BaseModelï¼Œè€ŒBaseModelæœ‰ä¸€ä¸ª__init__å‡½æ•°åœ¨è¯¥å‡½æ•°ä¸­ï¼Œé¦–å…ˆå°±ä¼šè°ƒç”¨pre_init.send(self.__class__,**kwargs)å‘é€å³å°†å¼€å§‹initçš„ä¿¡å·ï¼Œç„¶åå†è¿›è¡Œå…·ä½“çš„initæ“ä½œï¼Œåœ¨initä¹‹åå†è°ƒç”¨post_init.sendå‘é€initå®Œæˆçš„ä¿¡å·ã€‚æ•…è¿™é‡Œçš„BaseModelç±»å°±æ˜¯è¿™ä¸¤ä¸ªä¿¡å·å¯¹è±¡(pre_initã€post_init)çš„senderã€‚è€Œæˆ‘ä»¬çš„modelç±»éƒ½æ˜¯ç»§æ‰¿è‡ªBaseModelï¼Œinitæ–¹æ³•ä¹Ÿæ˜¯ç»§æ‰¿æ¥çš„ï¼Œæ•…æ­¤æ—¶çš„senderå°±æ˜¯æˆ‘ä»¬å®šä¹‰çš„modelç±»ã€‚
3. receiver ä¿¡å·çš„æ¥æ”¶æ–¹ï¼Œä¸ºå¯è°ƒç”¨å¯¹è±¡ï¼Œä¸€èˆ¬æ˜¯ä¸ªå‡½æ•°ï¼Œæ¥æ”¶signal.send()ä¼ é€’è¿‡æ¥çš„å‚æ•°ï¼Œå†è¿›è¡Œç›¸å…³çš„æ“ä½œ
å‡å¦‚æˆ‘ä»¬æœ‰ä¸ªmodelå¯¹è±¡ä¸ºPeopleï¼Œæˆ‘ä»¬æƒ³è¦åœ¨æ„é€ æ¯ä¸€ä¸ªPeopleæ—¶ï¼ˆnew_peopleÂ = People(name=&amp;quot;haha&amp;quot;,email=&amp;quot;haha@mail.com&amp;quot;)ï¼‰æ‰“å°å‡ºå…¶ç›¸å…³ä¿¡æ¯ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ªå‡½æ•°æ‰“å°å…¶ä¿¡æ¯ï¼š
def print_info(*args,**kwargs): print(f&amp;#34;args: {args}\nkwargs: {kwargs}&amp;#34;) ç„¶åä½¿ç”¨pre_init.connect(print_info, sender=People)å°†å…¶ä¸senderç»‘å®šèµ·æ¥,å³åœ¨pre_initçš„receiversåˆ—è¡¨ä¸­å­˜ä¸€æ¡å¯¹åº”çš„è®°å½•:
((People_id,print_info_id),print_info_weakref) æ­¤å¤„çš„print_infoå‡½æ•°å³ä¸ºä¸€ä¸ªreceiverï¼Œpre_initä¿¡å·ä¸­Peopleç±»å¯¹åº”çš„receiverã€‚
å½“ç„¶ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨è£…é¥°å™¨ï¼Œä¸è¿‡ä¹Ÿæ˜¯åŒæ ·çš„é“ç†
@receiver(pre_init,sender=People) def print_info_before_init(sender,*args,**kwargs): print(f&amp;#34;args: {args}\nkwargs: {kwargs}&amp;#34;) æœ€ç»ˆæ‰“å°å‡ºæ¥çš„ç»“æœæ˜¯
args: []kwargs: {&#39;name&#39;:&#39;haha&#39;,&#39;email&#39;:&#39;haha.</description>
    </item>
    
    <item>
      <title>Top 6 Django Decorators</title>
      <link>https://heaciy.com/p/top-6-django-decorators/</link>
      <pubDate>Sun, 14 Feb 2021 00:00:00 +0000</pubDate>
      
      <guid>https://heaciy.com/p/top-6-django-decorators/</guid>
      <description>ä½œè€…ğŸ‘¨â€ğŸ’»ï¼šPablo Iglesias æ—¶é—´ğŸ•ï¼š2018/06/27 åŸæ–‡é“¾æ¥ğŸŒï¼šhttps://www.bedjango.com/blog/top-6-django-decorators/ å£°æ˜ğŸ‘‰ï¼šæœ¬æ–‡ä¸ºè½¬è½½ï¼Œä»…ä½œä¸ºä¸ªäººå­¦ä¹ è®°å½•
 What is a Decorator? A decorator is the name of one of the most popular design patterns used nowadays, many times we use it without knowing that we are using a design pattern. And what&amp;rsquo;s so special about this pattern? As we can read at Python Wiki using It is a way of apparently modifying an object&amp;rsquo;s behavior, by enclosing it inside a decorating object with a similar interface.</description>
    </item>
    
  </channel>
</rss>
